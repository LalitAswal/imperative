<!--
/*
* This program and the accompanying materials are made available under the terms of the
* Eclipse Public License v2.0 which accompanies this distribution, and is available at
* https://www.eclipse.org/legal/epl-v20.html
*
* SPDX-License-Identifier: EPL-2.0
*
* Copyright Contributors to the Zowe Project.
*
*/
-->

<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/github.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js"
    ></script>

    <script>
        const fr = new FileReader()

        fr.onload(()=>{
            document.getElementById('diffOutput').textContent = fr.result
        })

        fr.readAsText()
    const diffString = ${unifiedStringDiff}

      document.addEventListener('DOMContentLoaded', function () {
        var targetElement = document.getElementsByClassName('d2h-file-list-wrapper')[0];
        var configuration = {
          drawFileList: true,
          fileListToggle: false,
          fileListStartVisible: false,
          fileContentToggle: false,
          matching: 'lines',
          outputFormat: 'side-by-side',
          synchronisedScroll: true,
          highlight: true,
          renderNothingWhenEmpty: false,
        };
        var diff2htmlUi = new Diff2HtmlUI(targetElement, diffString, configuration);
        diff2htmlUi.draw();
        diff2htmlUi.highlightCode();
      });
    </script>

    <meta content="0; url=diff.html?p=" />
  </head>
  <body>
    ${htmlDiff}
  </body>
</html>
